import os
import uuid
import time
import socket
from datetime import datetime

def generate_logid():
    try:
        using_ip = os.environ.get(
            "HOST_IP_ADDR",
            socket.gethostbyname(socket.gethostname())
        )
        ip_token_list = using_ip.split(".")
        _full_length_ip = "".join([x.zfill(3) for x in ip_token_list])
        dt = datetime \
            .fromtimestamp(int(time.time())) \
            .strftime("%Y%m%d%H%M%S")

        return "%s%s%s" % (
            dt,
            _full_length_ip,
            str(uuid.uuid4().int & (1<<64)-1)[:5])

    except Exception as e:
        return "0"

if __name__ == '__main__':
    logid = generate_logid()
    print  'logid: ', logid

# coding=utf-8

__author__ = 'qiukun'

class MultiProxy():
    """
    typical usage:
    p = MultiProxy([a, b])
    对 p 的方法调用会应用到 a, b，返回 b（最后一个对象）对应方法的返回值
    e.g.
    buf = p.r()
    p.write()
    """
    def __init__(self, objs):
        """
        :param objs: a iterator of objs to be proxyed.
        :return: the proxy
        """
        self.objs = objs
    def __getattr__(self, item):
        def wrapper(*args, **kwargs):
            rt = None
            for o in self.objs:
                rt = getattr(o, item)(*args, **kwargs)
            return rt
        return wrapper
#coding=utf8
from pyutil.program.conf2 import Conf
from os import environ
from subprocess import Popen, PIPE

conf = Conf('/opt/tiger/consul_deploy/etc/common.conf', use_translate=False)
agent_host = '127.0.0.1'
if environ.get('IS_TCE_DOCKER_ENV') == "1" and environ.get('IS_HOST_NETWORK') != "1":
    pipe = Popen("/sbin/ip route|awk '/default/{ print $3}'", stdin = None, stdout = PIPE, shell=True)
    host = pipe.communicate()[0]
    if host:
        agent_host = host.strip('\n')
agent_port = int(conf.get('ports.http', '2280'))

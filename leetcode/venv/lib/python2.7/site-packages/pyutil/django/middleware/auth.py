from django.contrib.admin.views.decorators import staff_member_required

SKIP_URL = ("/login/", "/logout/")
class RequireStaffMemberMiddleware(object):
    @staticmethod
    def process_request(request):
        for url in SKIP_URL:
            if request.path.endswith(url):
                return
        @staff_member_required
        def empty_func(request):
            pass
        return empty_func(request)  # ALL IS WELL in staff_member_required

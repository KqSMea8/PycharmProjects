#!/usr/bin/env python
# coding: utf-8
__author__ = 'zhenghuabin'

import unittest

from pyutil.program.conf2 import Conf
from pyutil.program.pathutil import get_fullpath
from pyutil.etcd.etcd_client import EtcdClient

conf = Conf(get_fullpath(__file__, '../conf/etcd.conf'))


class EtcdMachineTestCase(unittest.TestCase):
    def test_etcd_machines(self):
        cli = EtcdClient(conf)
        host_ports = conf.get_values("etcd_host_port")
        self.assertItemsEqual(["http://" + hp for hp in host_ports], cli.machines)


if __name__ == '__main__':
    unittest.main()

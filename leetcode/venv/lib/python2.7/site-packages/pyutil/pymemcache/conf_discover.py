#!/usr/bin/env python
# coding: utf-8
__author__ = 'zhenghuabin'

import os


def get_cluster_info(cluster, psm, servs):
    psm = os.getenv("TCE_PSM") or os.getenv('SVC_NAME') or os.getenv('PSM') or psm

    if not servs:
        from pyutil.program.conf import Conf
        if cluster.startswith('redis'):
            conf = Conf("/etc/ss_conf/redis_web.conf")
            servs = conf.get_values(cluster)
            if len(servs) == 0 or (len(servs) == 1 and len(servs[0]) == 0):
                conf = Conf("/etc/ss_conf/redis.conf")
            servs = conf.get_values(cluster)
        elif cluster.startswith('memcache'):
            conf = Conf("/etc/ss_conf/memcache.conf")
            servs = conf.get_values(cluster)
        else:
            servs = []
    return (cluster, psm, servs)


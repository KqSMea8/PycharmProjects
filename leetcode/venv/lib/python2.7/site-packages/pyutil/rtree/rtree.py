import rtree_impl

class RTree:

    def __init__(self):
        self.tree = rtree_impl.rtree()

    def insert(self, minx, miny, maxx, maxy, id):
        self.tree.Insert(minx, miny, maxx, maxy, id)

    def search(self, minx, miny, maxx, maxy):
        v = rtree_impl.new_vector()
        self.tree.Search(minx, miny, maxx, maxy, v)
        ids = []
        for i in range(rtree_impl.vector_size(v)):
            ids.append(rtree_impl.vector_get(v, i))
        rtree_impl.delete_vector(v)
        return ids

    def load(self, file):
        self.tree.Load(file)

    def save(self, file):
        self.tree.Save(file)


if __name__ == '__main__':
    r = RTree()
    #r.insert(1,1,1,1,1)
    #r.insert(3,3,3,3,3)
    r.load("haha")
    print(r.search(2,2,3,3))



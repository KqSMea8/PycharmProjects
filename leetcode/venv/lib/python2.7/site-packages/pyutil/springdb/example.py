#encoding=utf8
#调用方式：
import redis
import logging
from pyutil.springdb import SpringDBClient
db = SpringDBClient('springdb_sandbox', 'sandbox')
#构造时传入集群名称和表名称的字符串即可。

# SpringDBClient内部会自行读取ss_conf里的配置
# 由于我们区分online/offline/test环境的配置，用zone来进行区分。
# 默认使用'auto'，对应的路径为/etc/ss_conf（是个软链）
# 注意：目前online和offline是一样的。
SpringDBClient.set_zone("online") # auto/online/offline/test
 
#该类底层是redis.Redis，具体接口和redis.Redis一致（注意，不是StrictRedis）。
#会抛异常（redis.RedisError)
#支持pipeline。
try:
    val = db.get('abc')
    print val
except redis.RedisError as e:
    logging.exception('redis failed')

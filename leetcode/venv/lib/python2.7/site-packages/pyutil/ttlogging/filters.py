"""
Useful handlers for toutiao environment

Authors: xuruiqi
"""

import logging

class LevelFilter(object):
    """
    This filter will filter levels that are not in allowed_levels
    """
    def __init__(self, allowed_levels):
        self.allowed_levels = {}
        for level in allowed_levels:
            if isinstance(level, basestring):
                level = logging.getLevelName(level)
            if isinstance(level, int):
                self.allowed_levels[level] = 1

    def filter(self, record):
        if self.allowed_levels.get(record.levelno, None):
            return 1
        else:
            return 0
